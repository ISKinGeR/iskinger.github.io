<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KR</title>
  <meta name="description" content="حازم (KR)" />
  <link rel="icon" href="https://cdn.discordapp.com/avatars/272637834194714626/96fbee6b6c4023332797881b73ba6fa1.png" />
  <link rel="preconnect" href="https://api.github.com" crossorigin>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary: #0099ff;
      --primary-glow: 0 153 255;
      --card-hover: rgba(0,153,255,.08);
      --text-primary: #ffffff;
      --text-secondary: #a0a0a0;
      --text-muted: #707070;
      --bg-main: #000000;
      --bg-card: rgba(255,255,255,.03);
      --border: rgba(255,255,255,.08);
      --border-hover: rgba(0,153,255,.5);
    }
    ::-webkit-scrollbar { width: 10px; height: 10px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,.05); }
    ::-webkit-scrollbar-thumb { background: rgba(var(--primary-glow), .30); border-radius: 5px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(var(--primary-glow), .50); }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans Arabic', sans-serif; background: var(--bg-main); color: var(--text-primary); overflow-x: hidden; position: relative; line-height: 1.6; }
    body::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(ellipse at top, rgba(var(--primary-glow), .10) 0%, transparent 50%), radial-gradient(ellipse at bottom, rgba(var(--primary-glow), .05) 0%, transparent 50%); pointer-events: none; z-index: -1; animation: bgPulse 15s ease-in-out infinite; }
    @keyframes bgPulse { 0%, 100% { opacity: 0.6; } 50% { opacity: 1; } }
    .particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; overflow: hidden; }
    .scroll-progress { position: fixed; top: 0; left: 0; width: 0%; height: 3px; background: linear-gradient(90deg, var(--primary), #66ccff); z-index: 9999; transition: width 0.1s ease; box-shadow: 0 0 10px rgba(0,153,255,.5); }
    .particle { position: absolute; width: 4px; height: 4px; background: rgba(var(--primary-glow), .60); border-radius: 50%; animation: float linear infinite; box-shadow: 0 0 10px rgba(var(--primary-glow), .30); }
    @keyframes float { from { transform: translateY(100vh) translateX(0); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } to { transform: translateY(-100vh) translateX(100px); opacity: 0; } }
    .header { background: rgba(10,10,10,.8); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 1000; transition: all .6s cubic-bezier(.4,0,.2,1); }
    .header.scrolled { background: rgba(10,10,10,.95); box-shadow: 0 10px 40px rgba(0,0,0,.5), 0 1px 0 rgba(0,153,255,.2); }
    .nav-container { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; padding: 16px 24px; }
    .logo { display: flex; align-items: center; gap: 12px; font-size: 18px; font-weight: 700; cursor: pointer; transition: transform .3s ease; }
    .logo:hover { transform: scale(1.05); }
    .logo img { width: 38px; height: 38px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); animation: logoGlow 3s ease-in-out infinite; }
    @keyframes logoGlow { 0%, 100% { box-shadow: 0 0 20px rgba(var(--primary-glow),.4); } 50% { box-shadow: 0 0 30px rgba(var(--primary-glow),.6), 0 0 60px rgba(var(--primary-glow),.2); } }
    .nav-menu { display: flex; align-items: center; gap: 32px; list-style: none; }
    .nav-link { color: var(--text-primary); text-decoration: none; font-weight: 500; position: relative; padding: 4px 0; transition: color .3s ease; opacity: .9; }
    .nav-link::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 2px; background: linear-gradient(90deg, var(--primary), #66ccff); transition: width .4s cubic-bezier(.4,0,.2,1); }
    .nav-link:hover::after, .nav-link.active::after { width: 100%; }
    .nav-link:hover, .nav-link.active { color: var(--primary); opacity: 1; }
    .lang-btn { background: rgba(0,153,255,.1); border: 1px solid rgba(0,153,255,.3); color: #8bd3ff; border-radius: 10px; padding: 8px 16px; cursor: pointer; font-weight: 600; transition: all .3s ease; position: relative; overflow: hidden; }
    .lang-btn::before { content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; background: rgba(0,153,255,.2); border-radius: 50%; transform: translate(-50%, -50%); transition: width .4s ease, height .4s ease; }
    .lang-btn:hover::before { width: 100px; height: 100px; }
    .lang-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,153,255,.3); border-color: var(--primary); }
    .hero { max-width: 1200px; margin: 0 auto; padding: 100px 24px; display: grid; grid-template-columns: 1fr 1fr; gap: 60px; align-items: center; min-height: 75vh; position: relative; }
    .hero-content h1 { font-size: clamp(2rem, 5vw, 3rem); line-height: 1.2; margin-bottom: 20px; background: linear-gradient(135deg, #fff 0%, #8bd3ff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; animation: textGlow 3s ease-in-out infinite; }
    @keyframes textGlow { 0%, 100% { filter: brightness(1); } 50% { filter: brightness(1.2) drop-shadow(0 0 20px rgba(0,153,255,.5)); } }
    .hero-content p { color: var(--text-secondary); font-size: 1.1rem; animation: fadeInUp .8s ease .2s both; }
    .hero-visual { display: flex; justify-content: center; align-items: center; position: relative; }
    .hero-img-wrapper { position: relative; width: 80%; max-width: 280px; }
    .hero-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 24px; filter: saturate(1.05) brightness(1.05); box-shadow: 0 20px 60px rgba(0,153,255,.3); transition: transform .6s ease, box-shadow .6s ease; }
    .hero-img:hover { transform: scale(1.03); box-shadow: 0 32px 80px rgba(0,153,255,.3); }
    @keyframes floatElement { 0%, 100% { transform: translateY(0) rotate(0deg); } 33% { transform: translateY(-10px) rotate(2deg); } 66% { transform: translateY(10px) rotate(-2deg); } }
    .card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; padding: 24px; position: relative; transition: all .4s cubic-bezier(.4,0,.2,1); overflow: hidden; cursor: pointer; }
    .card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, transparent, rgba(0,153,255,.1)); opacity: 0; transition: opacity .4s ease; pointer-events: none; }
    .card:hover::before { opacity: 1; }
    .card::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(0,153,255,.1) 0%, transparent 70%); opacity: 0; transition: opacity .4s ease; pointer-events: none; }
    .card:hover { transform: translateY(-8px) scale(1.02); border-color: var(--border-hover); box-shadow: 0 20px 60px rgba(0,153,255,.15), 0 10px 20px rgba(0,0,0,.2); }
    .card:hover::after { opacity: 1; animation: cardPulse 2s ease-in-out infinite; }
    @keyframes cardPulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    .plan-header { display: flex; gap: 16px; align-items: flex-start; margin-bottom: 12px; }
    .plan-icon { width: 42px; height: 42px; padding: 8px; background: rgba(0,153,255,.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; }
    .plan-type { font-size: .85rem; color: #8bd3ff; font-weight: 600; display: flex; align-items: center; gap: 6px; }
    .lang-dot { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-inline-end: 6px; box-shadow: 0 0 10px currentColor; }
    .plan-title { font-size: 1.3rem; font-weight: 800; margin-top: 4px; transition: color .3s ease; }
    .card:hover .plan-title { color: var(--primary); }
    .plan-desc { color: #cfd6e4; margin: 12px 0 16px; line-height: 1.6; min-height: 48px; }
    .meta-row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; margin-top: 12px; }
    .badge { display: inline-flex; align-items: center; gap: 6px; background: rgba(0,153,255,.12); color: #8bd3ff; padding: 6px 14px; border-radius: 20px; font-size: .85rem; border: 1px solid rgba(0,153,255,.2); transition: all .3s ease; }
    .badge:hover { background: rgba(0,153,255,.2); transform: translateY(-2px); }
    .mini-btn { display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: 20px; font-size: .85rem; text-decoration: none; border: 1px solid rgba(0,153,255,.3); background: rgba(0,153,255,.1); color: #8bd3ff; font-weight: 600; transition: all .3s ease; position: relative; overflow: hidden; isolation: isolate; }
    .mini-btn::before { z-index: -1; pointer-events: none; content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0; background: var(--primary); border-radius: 50%; transform: translate(-50%, -50%); transition: width .4s ease, height .4s ease; }
    .mini-btn:hover::before { width: 100px; height: 100px; }
    .mini-btn:hover { color: #000; transform: translateY(-2px); box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4); z-index: 1; }
    .mini-btn span { position: relative; z-index: 1; }
    .topics { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }
    .topic { background: rgba(255,255,255,.06); color: #cfe6ff; border: 1px solid rgba(255,255,255,.15); padding: 4px 12px; border-radius: 16px; font-size: .8rem; transition: all .3s ease; }
    .topic:hover { background: rgba(0,153,255,.15); border-color: rgba(0,153,255,.3); transform: translateY(-2px); }
    .clip-card { background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03)); border: 1px solid var(--border); border-radius: 20px; overflow: hidden; transition: all .4s cubic-bezier(.4,0,.2,1); cursor: pointer; }
    .clip-card:hover { transform: translateY(-8px) scale(1.02); border-color: var(--border-hover); box-shadow: 0 25px 60px rgba(0,153,255,.15); }
    .clip-media { position: relative; background: #0e0e0e; aspect-ratio: 16/9; overflow: hidden; }
    .clip-media img { width: 100%; height: 100%; object-fit: cover; transition: transform .4s ease; }
    .clip-card:hover .clip-media img { transform: scale(1.1); }
    .clip-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.5)); display: flex; align-items: center; justify-content: center; opacity: 0; transition: opacity .4s ease; }
    .clip-card:hover .clip-overlay { opacity: 1; }
    .play-btn { width: 60px; height: 60px; background: rgba(0,153,255,.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 24px; transform: scale(0); transition: transform .4s cubic-bezier(.4,0,.2,1); }
    .clip-card:hover .play-btn { transform: scale(1); }
    .section { padding: 80px 0; max-width: 1200px; margin: 0 auto; padding-left: 24px; padding-right: 24px; position: relative; }
    .section-title { text-align: center; font-size: 2.2rem; font-weight: 800; margin-bottom: 12px; background: linear-gradient(135deg, #fff 0%, #8bd3ff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .section-subtitle { text-align: center; color: var(--text-secondary); margin-bottom: 40px; font-size: 1.1rem; }
    .plans-grid, .clips-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr)); gap: 24px; margin-top: 24px; }
    .reveal { opacity: 0; transform: translateY(30px); transition: opacity .8s cubic-bezier(.4,0,.2,1), transform .8s cubic-bezier(.4,0,.2,1); }
    .reveal.in { opacity: 1; transform: translateY(0); }
    .stagger { animation: staggerIn .6s cubic-bezier(.4,0,.2,1) forwards; opacity: 0; }
    .stagger:nth-child(1) { animation-delay: 0.1s; }
    .stagger:nth-child(2) { animation-delay: 0.2s; }
    .stagger:nth-child(3) { animation-delay: 0.3s; }
    .stagger:nth-child(4) { animation-delay: 0.4s; }
    .stagger:nth-child(5) { animation-delay: 0.5s; }
    .stagger:nth-child(6) { animation-delay: 0.6s; }
    @keyframes staggerIn { to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .footer { border-top: 1px solid var(--border); padding: 60px 0 30px; margin-top: 80px; background: linear-gradient(180deg, transparent, rgba(0,153,255,.03)); }
    .footer-grid { max-width: 1200px; margin: 0 auto; padding: 0 24px; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; }
    .footer h3 { color: #8bd3ff; margin-bottom: 16px; font-size: 1.1rem; }
    .footer a { color: var(--text-secondary); text-decoration: none; display: inline-block; margin: 4px 0; transition: all .3s ease; position: relative; }
    .footer a::after { content: ''; position: absolute; bottom: -2px; left: 0; width: 0; height: 1px; background: var(--primary); transition: width .3s ease; }
    .footer a:hover { color: var(--primary); transform: translateX(5px); }
    .footer a:hover::after { width: 100%; }
    #toTop { position: fixed; right: 24px; bottom: 24px; width: 50px; height: 50px; opacity: 0; visibility: hidden; transition: all .4s cubic-bezier(.4,0,.2,1); background: rgba(0,153,255,.1); border: 1px solid rgba(0,153,255,.3); padding: 0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; color: var(--primary); cursor: pointer; backdrop-filter: blur(10px); }
    #toTop:hover { background: var(--primary); color: white; transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,153,255,.4); }
    #toTop.show { opacity: 1; visibility: visible; }
    .mobile-menu { display: none; background: none; border: 1px solid var(--border); color: var(--text-primary); font-size: 20px; padding: 8px 12px; border-radius: 10px; cursor: pointer; transition: all .3s ease; }
    .mobile-menu:hover { background: rgba(0,153,255,.1); border-color: rgba(0,153,255,.3); }
    .skeleton { background: linear-gradient(90deg, rgba(255,255,255,.05) 25%, rgba(255,255,255,.1) 50%, rgba(255,255,255,.05) 75%); background-size: 200% 100%; animation: skeleton 1.5s ease-in-out infinite; border-radius: 8px; height: 20px; margin: 10px 0; }
    @keyframes skeleton { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    @media (max-width: 860px) {
      .hero { grid-template-columns: 1fr; gap: 40px; text-align: center; padding: 60px 24px; }
      .nav-menu { display: none; position: absolute; top: 100%; right: 0; background: rgba(10,10,10,.98); backdrop-filter: blur(20px); flex-direction: column; padding: 20px; border-radius: 0 0 16px 16px; border: 1px solid var(--border); border-top: none; min-width: 200px; }
      .nav-menu.active { display: flex; }
      .mobile-menu { display: block; }
      .hero h1 { font-size: 2rem; }
      .plans-grid, .clips-grid { grid-template-columns: 1fr; }
    }
    @media (prefers-reduced-motion: reduce) { * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; } }
  </style>
</head>
<body>  
  <div class="scroll-progress" id="scrollProgress"></div>
  <div class="particles"></div>
  <header class="header">
    <div class="nav-container">
      <div class="logo" onclick="window.location.href='#contact'">
        <img src="https://cdn.discordapp.com/avatars/272637834194714626/96fbee6b6c4023332797881b73ba6fa1.png" alt="KR"/>
        <span id="Name">حازم</span>
      </div>
      <nav class="nav-menu" id="navMenu">
        <a class="nav-link" href="#home" data-i18n="nav.home">الرئيسية</a>
        <a class="nav-link" href="#projects" data-i18n="nav.projects">المشاريع</a>
        <a class="nav-link" href="#clips" data-i18n="nav.clips">المقاطع</a>
        <a class="nav-link" href="#contact" data-i18n="nav.contact">التواصل</a>
      </nav>
      <div style="display:flex;align-items:center;gap:10px">
        <button id="lang" class="lang-btn">EN</button>
        <button class="mobile-menu" id="mobileMenuBtn" aria-label="Open menu">☰</button>
      </div>
    </div>
  </header>

  <section class="hero" id="home">
    <div class="reveal hero-content">
      <h1 id="heroTitle">أهلاً! أنا حازم — مطوّر نظم وخوادم ألعاب</h1>
      <p id="heroSub">هنا أعرض أفضل شغلي: سكربتات، أنظمة، وواجهات مخصصة.</p>
    </div>
    <div class="hero-visual">
      <div class="hero-img-wrapper">
        <img id="heroImg" class="hero-img" src="" alt="KR preview image" loading="lazy" decoding="async"/>
      </div>
    </div>
  </section>

  <section class="section reveal" id="projects">
    <h2 class="section-title" data-i18n="sections.highlight">أبرز المشاريع</h2>
    <p class="section-subtitle" data-i18n="sections.publicAll">كل المشاريع العامة.</p>
    <div id="projectsGrid" class="plans-grid"><div class="card stagger"></div><div class="card stagger"></div><div class="card stagger"></div></div>
    <div id="projectsError" style="text-align:center;color:#ff6b6b;margin-top:16px;display:none"></div>
    <div style="text-align:center;margin-top:18px;display:flex;gap:10px;justify-content:center">
      <button id="loadMore" class="mini-btn" style="display:none" data-i18n="actions.more">عرض المزيد</button>
      <button id="retryBtn" class="mini-btn" style="display:none" data-i18n="actions.retry">إعادة المحاولة</button>
    </div>
  </section>

  <section class="section reveal" id="clips">
    <h2 class="section-title" data-i18n="sections.clips">المقاطع</h2>
    <p class="section-subtitle muted" data-i18n="sections.clipsSub">مقاطع قصيرة لواجهات وأنظمة طوّرتها.</p>
    <div id="clipsGrid" class="clips-grid"></div>
  </section>

  <section class="section reveal" id="contact">
    <h2 class="section-title" data-i18n="sections.aboutContact">عنّي والتواصل</h2>
    <p class="section-subtitle" data-i18n="sections.bio">نبذة سريعة</p>
    <div class="features-grid" style="margin-top:10px;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px">
      <div class="card stagger">
        <h3 style="margin-bottom:6px" data-i18n="contact.title">وسائل التواصل</h3>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="mini-btn" href="mailto:kinger.noro@gmail.com" data-i18n="actions.email">Email</a>
          <a class="mini-btn" href="https://discord.gg/3mGCt7M8sd" target="_blank" rel="noopener" data-i18n="actions.discord">Discord</a>
          <a class="mini-btn" href="https://ISKinGeR.github.io" target="_blank" rel="noopener" data-i18n="actions.website">Website</a>
        </div>
      </div>
      <div class="card stagger">
        <h3 style="margin-bottom:6px" data-i18n="stack.title">الخبرات</h3>
        <p class="muted">Lua / FiveM — React (NUI) — Discord — MySQL</p>
      </div>
    </div>
  </section>

  <footer class="footer" id="footer">
    <div class="footer-grid">
      <div class="reveal">
        <h3>KR</h3>
        <a href="mailto:kinger.noro@gmail.com">kinger.noro@gmail.com</a><br/>
        <a href="https://ISKinGeR.github.io" target="_blank" rel="noopener">ISKinGeR.github.io</a><br/>
        <a href="https://discord.gg/3mGCt7M8sd" target="_blank" rel="noopener">Discord</a>
      </div>
      <div class="reveal">
        <h3 data-i18n="nav.title">التنقل</h3>
        <a href="#home" data-i18n="nav.home">الرئيسية</a><br/>
        <a href="#projects" data-i18n="nav.projects">المشاريع</a><br/>
        <a href="#clips" data-i18n="nav.clips">المقاطع</a><br/>
        <a href="#contact" data-i18n="nav.contact">التواصل</a>
      </div>
      <div class="reveal">
        <h3 data-i18n="stack.title">الخبرات</h3>
        <span>Lua / FiveM</span><br/><span>React (NUI)</span><br/><span>Discord + MySQL</span>
      </div>
    </div>
  </footer>

  <button id="toTop" aria-label="Back to top">↑</button>

  <script>
    const HERO_IMG = "https://cdn.discordapp.com/avatars/272637834194714626/96fbee6b6c4023332797881b73ba6fa1.png?size=1024";
    const GH_USERNAME = "ISKinGeR";
    const FEATURED_REPOS = ["Mythic-gangs","mythic-inventory","KR-ahs"];
    const REPO_BLACKLIST = ["NgrokRDP"];
    const PAGE_SIZE = 9;
    let _reposCache = []; let _page = 0;

    function langDot(lang){const m={JavaScript:"#f1e05a",TypeScript:"#3178c6",Lua:"#000080",Python:"#3572A5",C:"#555555",CSharp:"#178600",CPlusPlus:"#f34b7d",Shell:"#89e051",HTML:"#e34c26",CSS:"#563d7c",Go:"#00ADD8"};const c=m[lang]||"#8bd3ff";return '<span class="lang-dot" style="background:'+c+'"></span>'}
    function topicsChips(r){const t=r.topics||[];return t.slice(0,4).map(x=>`<span class="topic">#${x}</span>`).join("")}

    function repoCard(r){
      const el=document.createElement("div"); el.className="card stagger";
      const date=new Date(r.pushed_at).toLocaleDateString();
      const hasDemo=r.homepage&&r.homepage.trim();
      el.innerHTML=`
        <div class="plan-header">
          <img src="https://ext.same-assets.com/2927020613/3989641502.svg" class="plan-icon" alt="repo"/>
          <div>
            <div class="plan-type">${langDot(r.language||"")}${r.language||"Repository"}</div>
            <div class="plan-title">${r.name}</div>
          </div>
        </div>
        <p class="plan-desc">${r.description? r.description.replace(/</g,"&lt;"):""}</p>
        <div class="meta-row">
          <span class="badge">★ ${r.stargazers_count}</span>
          <span class="badge">${date}</span>
          <a class="mini-btn" href="${r.html_url}" target="_blank" rel="noopener" data-i18n="actions.github">GitHub</a>
          ${hasDemo?`<a class="mini-btn" href="${r.homepage}" target="_blank" rel="noopener" data-i18n="actions.demo">Demo</a>`:""}
        </div>
        <div class="topics">${topicsChips(r)}</div>`;
      return el;
    }

    async function fetchRepos(){
      const url=`https://api.github.com/users/${GH_USERNAME}/repos?per_page=100&sort=updated`;
      const res=await fetch(url,{headers:{"Accept":"application/vnd.github+json"}});
      if(!res.ok){const t=await res.text();throw new Error("GitHub API: "+res.status+" "+t)}
      const data=await res.json();
      const filtered=data.filter(r=>!r.private&&!r.archived&&!REPO_BLACKLIST.includes(r.name));
      filtered.sort((a,b)=>new Date(b.pushed_at)-new Date(a.pushed_at));
      if(FEATURED_REPOS?.length){
        filtered.sort((a,b)=>{const ai=FEATURED_REPOS.indexOf(a.name),bi=FEATURED_REPOS.indexOf(b.name);const aF=ai===-1?1e9:ai,bF=bi===-1?1e9:bi;return aF-bF||(new Date(b.pushed_at)-new Date(a.pushed_at))})
      }
      return filtered;
    }

    function renderProjects(p){
      const grid=document.getElementById("projectsGrid");
      const start=p*PAGE_SIZE,slice=_reposCache.slice(start,start+PAGE_SIZE);
      if(p===0)grid.innerHTML="";
      slice.forEach(r=>grid.appendChild(repoCard(r)));
      document.getElementById("loadMore").style.display=(start+PAGE_SIZE<_reposCache.length)?"inline-flex":"none";
    }

    async function loadRepos(){
      const err=document.getElementById("projectsError");
      try{
        if(!_reposCache.length){_reposCache=await fetchRepos()}
        _page=0;renderProjects(_page);
      }catch(e){
        err.style.display="block";
        err.textContent=(current==="ar"?"فشل جلب المشاريع من GitHub. جرّب لاحقاً.":"Failed to fetch from GitHub. Try later.");
        document.getElementById("retryBtn").style.display="inline-flex";
      }
    }

    const CLIPS = [
      {
        ytid: "-Z4KFc-yi30",
        title: {
          ar: "سكريبت الميث الجديد ل mythic-framework",
          en: "The new meth script for mythic-framework",
        },
        desc: {
          ar: "تجربة.",
          en: "preview.",
        },
        tags: ["FiveM", "Lua", "Mythic"],
      },
      {
        ytid: "lXqu17aoUZA",
        title: {
          ar: "تجربة سكربت الدروب | نسخة اولية",
          en: "Test drops script | WIP",
        },
        desc: {
          ar: "",
          en: "",
        },
        tags: ["FiveM", "Drops", "Script"],
      },
      {
        ytid: "Auypl9JHOlc",
        title: {
          ar: "تجربة سكربت التصنيع | نسخة اولية",
          en: "Test crafting script | WIP",
        },
        desc: {
          ar: "",
          en: "",
        },
        tags: ["FiveM", "Crafting", "Script"],
      },
    ];
    function ytThumb(id){return `https://i.ytimg.com/vi/${id}/hqdefault.jpg`}
    function clipCard(clip){
      const el=document.createElement("div"); el.className="clip-card stagger";
      const t=(current==="ar"?clip.title.ar:clip.title.en);
      const d=(current==="ar"?clip.desc.ar:clip.desc.en);
      const chips=(clip.tags||[]).map(x=>`<span class="topic">#${x}</span>`).join("");
      el.innerHTML=`
        <div class="clip-media" data-ytid="${clip.ytid}">
          <img src="${ytThumb(clip.ytid)}" alt="${t}" loading="lazy"/>
          <div class="clip-overlay"><div class="play-btn">▶</div></div>
        </div>
        <div style="padding:16px">
          <div style="font-size:1.2rem;font-weight:700;margin-bottom:8px">${t}</div>
          <div style="color:var(--text-secondary);font-size:0.95rem">${d}</div>
          <div class="topics" style="margin-top:12px">${chips}</div>
        </div>`;
      setTimeout(()=>{
        const media=el.querySelector(".clip-media");
        media.style.cursor="pointer";
        media.addEventListener("click",()=>{
          const id=media.getAttribute("data-ytid");
          media.innerHTML=`<iframe width="100%" height="100%" style="border:0" src="https://www.youtube-nocookie.com/embed/${id}?autoplay=1&rel=0&modestbranding=1" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`;
        },{once:true});
      },0);
      return el;
    }
    function renderClips(){const grid=document.getElementById("clipsGrid");grid.innerHTML="";CLIPS.forEach(c=>grid.appendChild(clipCard(c)))}

    const I18N={
      ar:{Name:"حازم",nav:{home:"الرئيسية",projects:"المشاريع",clips:"المقاطع",contact:"التواصل",title:"التنقل"},hero:{title:"أهلاً! أنا حازم — مطوّر نظم وخوادم ألعاب",sub:"هنا أعرض أفضل شغلي: سكربتات، أنظمة، وواجهات مخصصة."},sections:{highlight:"أبرز المشاريع",publicAll:"كل المشاريع العامة.",clips:"المقاطع",clipsSub:"مقاطع قصيرة لواجهات وأنظمة طوّرتها.",aboutContact:"عنّي والتواصل",bio:"نبذة سريعة"},actions:{more:"عرض المزيد",retry:"إعادة المحاولة",github:"GitHub",demo:"Demo",email:"Email",discord:"Discord",website:"Website"},contact:{title:"وسائل التواصل"},stack:{title:"الخبرات"}},
      en:{Name:"Hazem",nav:{home:"Home",projects:"Projects",clips:"Clips",contact:"Contact",title:"Navigation"},hero:{title:"Hi! I'm Hazem — Systems & Game Server Dev",sub:"Showcasing my best work: scripts, systems, and custom UIs."},sections:{highlight:"Highlighted Projects",publicAll:"All public repos.",clips:"Clips",clipsSub:"Short videos of UIs/systems.",aboutContact:"About & Contact",bio:"Quick bio"},actions:{more:"Load More",retry:"Retry",github:"GitHub",demo:"Demo",email:"Email",discord:"Discord",website:"Website"},contact:{title:"Contact"},stack:{title:"Experience"}}
    };
    let current="ar";

    function applyLang(lang){
      const t=I18N[lang]; current=lang;
      document.documentElement.lang=lang;
      document.documentElement.dir=(lang==="ar"?"rtl":"ltr");
      document.getElementById("Name").textContent=t.Name;
      document.querySelectorAll('[data-i18n^="nav."]').forEach(el=>{const k=el.dataset.i18n.split(".")[1];el.textContent=t.nav[k]});
      document.getElementById("heroTitle").textContent=t.hero.title;
      document.getElementById("heroSub").textContent=t.hero.sub;
      document.querySelectorAll('[data-i18n^="sections."]').forEach(el=>{const k=el.dataset.i18n.split(".")[1];el.textContent=t.sections[k]});
      document.querySelectorAll('[data-i18n^="actions."]').forEach(el=>{const k=el.dataset.i18n.split(".")[1];el.textContent=t.actions[k]});
      document.querySelectorAll('[data-i18n^="contact."]').forEach(el=>{const k=el.dataset.i18n.split(".")[1];el.textContent=t.contact[k]});
      document.querySelectorAll('[data-i18n^="stack."]').forEach(el=>{const k=el.dataset.i18n.split(".")[1];el.textContent=t.stack[k]});
      document.getElementById("lang").textContent=(lang==="ar"?"EN":"AR");
      renderClips();
      document.querySelectorAll('[data-i18n="actions.github"]').forEach(el=>el.textContent=t.actions.github);
      document.querySelectorAll('[data-i18n="actions.demo"]').forEach(el=>el.textContent=t.actions.demo);
      document.querySelectorAll('[data-i18n="actions.email"]').forEach(el=>el.textContent=t.actions.email);
      document.querySelectorAll('[data-i18n="actions.discord"]').forEach(el=>el.textContent=t.actions.discord);
      document.querySelectorAll('[data-i18n="actions.website"]').forEach(el=>el.textContent=t.actions.website);
    }

    let _lastY=window.scrollY; let _dir="down";
    window.addEventListener("scroll",()=>{const y=window.scrollY; _dir=(y>_lastY)?"down":"up"; _lastY=y},{passive:true});

    const _io=new IntersectionObserver((entries)=>{entries.forEach((e)=>{if(e.isIntersecting){e.target.classList.add("in")}else{if(_dir==="up"){e.target.classList.remove("in")}}})},{root:null,rootMargin:"0px 0px -10% 0px",threshold:0.12});
    function observeAll(){document.querySelectorAll(".reveal, .stagger").forEach(el=>_io.observe(el))}

    function handleHeaderScroll(){
      const topBtn=document.getElementById("toTop");
      const header=document.querySelector(".header");
      if(window.scrollY>50){header.classList.add("scrolled")}else{header.classList.remove("scrolled")}
      if(window.scrollY>400){topBtn.classList.add("show")}else{topBtn.classList.remove("show")}
      const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      document.getElementById("scrollProgress").style.width = scrolled + "%";
    }
    function parallaxSlow(){
      const img = document.getElementById("heroImg");
      if (!img) return;
      const y = window.pageYOffset;
      const rate = y * -0.06;
      img.style.setProperty('--parallaxY', rate + 'px');
    }

    function createParticles(n){
      const p=document.querySelector('.particles');
      for(let i=0;i<n;i++){
        const div=document.createElement('div');
        div.className='particle';
        div.style.left=Math.random()*100+'%';
        div.style.animationDuration=(Math.random()*10+10)+'s';
        div.style.animationDelay=Math.random()*5+'s';
        div.style.transform=`translateX(${Math.random()*200-100}px)`;
        p.appendChild(div);
      }
    }

    function init(){ new SmoothScroll(document,120,80) }
    function SmoothScroll(target, speed, smooth) {
      if (target === document)
        target = (document.scrollingElement
          || document.documentElement
          || document.body.parentNode
          || document.body) // cross browser support for document scrolling

      var moving = false
      var pos = target.scrollTop
      var frame = target === document.body
        && document.documentElement
        ? document.documentElement
        : target // safari is the new IE

      target.addEventListener('mousewheel', scrolled, { passive: false })
      target.addEventListener('DOMMouseScroll', scrolled, { passive: false })

      function scrolled(e) {
        e.preventDefault(); // disable default scrolling
        var delta = normalizeWheelDelta(e)
        pos += -delta * speed
        pos = Math.max(0, Math.min(pos, target.scrollHeight - frame.clientHeight)) // limit scrolling
        if (!moving) update()
      }

      function normalizeWheelDelta(e) {
        if (e.detail) {
          if (e.wheelDelta)
            return e.wheelDelta / e.detail / 40 * (e.detail > 0 ? 1 : -1) // Opera
          else
            return -e.detail / 3 // Firefox
        } else
          return e.wheelDelta / 120 // IE,Safari,Chrome
      }

      function update() {
        moving = true
        var delta = (pos - target.scrollTop) / smooth
        target.scrollTop += delta
        if (Math.abs(delta) > 0.5)
          requestFrame(update)
        else
          moving = false
      }

      var requestFrame = function () { // requestAnimationFrame cross browser
        return (
          window.requestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.oRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          function (func) { window.setTimeout(func, 1000 / 50); }
        );
      }()
    }

    document.addEventListener("DOMContentLoaded",()=>{
      createParticles(30);
      const hero=document.getElementById("heroImg"); hero.src=HERO_IMG; if(hero.complete) hero.classList.add("loaded"); else hero.addEventListener("load",()=>hero.classList.add("loaded"),{once:true});
      applyLang("ar");
      loadRepos();
      renderClips();
      observeAll();

      const btn=document.getElementById("mobileMenuBtn"); const menu=document.getElementById("navMenu");
      if(btn&&menu){ btn.addEventListener("click",()=>{ menu.classList.toggle("active") }) }

      document.getElementById("retryBtn").addEventListener("click",()=>{ document.getElementById("retryBtn").style.display="none"; document.getElementById("projectsError").style.display="none"; loadRepos() });
      document.getElementById("loadMore").addEventListener("click",()=>{ _page++; renderProjects(_page); observeAll() });
      document.getElementById("toTop").addEventListener("click",()=>{ window.scrollTo(0,0) });
      document.getElementById("lang").addEventListener("click",()=>applyLang(current==="ar"?"en":"ar"));

      document.body.style.opacity="0"; setTimeout(()=>{ document.body.style.transition="opacity .6s ease"; document.body.style.opacity="1" },100);
      window.addEventListener("scroll",()=>{ handleHeaderScroll(); parallaxSlow() },{passive:true});
      init();
    });
  </script>
</body>
</html>
